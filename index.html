<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Schengen Days</title>
  <meta name="theme-color" content="#0E1430" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="./design-tokens.css" />
  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; }

    .app {
      margin: 0;
      min-height: 100%;
      font: 15px/1.4 -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", "Segoe UI", Roboto, Arial, sans-serif;
      font-weight: 400;
      color: var(--color-text-primary);
      background: var(--color-bg-primary);
      -webkit-font-smoothing: antialiased;
      padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: var(--space-8) var(--space-8) calc(var(--space-32) + env(safe-area-inset-bottom));
      display: grid;
      gap: var(--space-8);
    }

    .card {
      background: var(--color-card);
      border: 1px solid var(--color-accent-soft);
      border-radius: var(--radius-card);
      padding: calc(var(--space-8) + var(--space-12));
      box-shadow: 0 10px 30px var(--color-bg-primary);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }

    .hero {
      display: grid;
      justify-items: center;
      text-align: center;
      gap: var(--space-16);
    }

    .ring {
      position: relative;
      width: 180px;
      height: 180px;
      display: grid;
      place-items: center;
    }

    .ringSvg {
      width: 180px;
      height: 180px;
      transform: rotate(-90deg);
    }

    .ringTrack { fill: none; stroke: var(--color-accent-soft); stroke-width: 14px; }
    .ringProgress {
      fill: none;
      stroke: var(--color-accent-primary);
      stroke-width: 14px;
      stroke-linecap: round;
      transition: stroke-dashoffset .35s ease-out;
    }

    .ringNumber {
      position: absolute;
      font-size: 56px;
      font-weight: 700;
      line-height: 1;
    }

    .heroLabel {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      color: var(--color-text-secondary);
    }

    .heroSub {
      margin: 0;
      font-size: 13px;
      color: var(--color-text-primary);
    }

    .sectionTitle {
      margin: 0 0 var(--space-16);
      text-align: center;
      font-size: 40px;
      font-weight: 500;
    }

    .field { display: grid; gap: var(--space-4); margin-bottom: var(--space-8); }

    .fieldHead {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      font-size: 32px;
      font-weight: 700;
      color: var(--color-text-primary);
    }

    .fieldIcon,
    .calIcon {
      width: var(--space-16);
      height: var(--space-16);
      color: var(--color-accent-soft);
      flex: 0 0 auto;
    }

    .input {
      width: 100%;
      height: 52px;
      background: var(--color-accent-soft);
      border: 1px solid var(--color-accent-soft);
      border-radius: var(--radius-input);
      color: var(--color-text-primary);
      font-size: 17px;
      padding: 0 var(--space-32) 0 var(--space-12);
      outline: none;
    }

    .input:focus { border-color: var(--color-accent-primary); }

    .inputWrap { position: relative; }

    .inputWrap .calIcon {
      position: absolute;
      right: var(--space-12);
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }

    .input::-webkit-calendar-picker-indicator {
      opacity: 0;
      position: absolute;
      right: 0;
      width: var(--space-32);
      height: 100%;
    }

    .quick-pills { display: flex; gap: var(--space-8); margin: var(--space-8) 0 var(--space-12); }

    .pill {
      min-width: calc(var(--space-24) * 2);
      height: 44px;
      border: 1px solid var(--color-accent-soft);
      border-radius: var(--radius-pill);
      background: var(--color-accent-soft);
      color: var(--color-text-primary);
      font-size: 24px;
      font-weight: 700;
    }

    .pill.active {
      background: var(--color-accent-primary);
      border-color: var(--color-accent-primary);
    }

    .tripMeta { margin: 0 0 var(--space-8); color: var(--color-text-secondary); }

    .btn-primary {
      width: 100%;
      height: 56px;
      border: none;
      border-radius: var(--radius-button);
      background: var(--color-accent-primary);
      color: var(--color-text-primary);
      font-size: 30px;
      font-weight: 700;
    }

    .actions { display: grid; gap: var(--space-8); }
    .subActions { display: flex; justify-content: space-between; gap: var(--space-8); }

    .secondary {
      border: 1px solid var(--color-accent-soft);
      background: var(--color-accent-soft);
      color: var(--color-text-primary);
      border-radius: var(--radius-pill);
      padding: var(--space-8) var(--space-8);
      font-size: 12px;
    }

    .error { min-height: var(--space-16); font-size: 12px; color: var(--color-text-primary); }
    .hide { display: none; }

    .tripsTitle { margin: 0 0 var(--space-8); font-size: 16px; font-weight: 700; }

    .tripRow {
      display: flex;
      justify-content: space-between;
      gap: var(--space-8);
      align-items: flex-start;
      padding: var(--space-8);
      border: 1px solid var(--color-accent-soft);
      border-radius: var(--radius-input);
      margin-bottom: var(--space-8);
      background: var(--color-card);
    }

    .tripMain { font-weight: 700; }
    .tripSub { font-size: 12px; color: var(--color-text-secondary); margin-top: var(--space-4); }
    .rowBtns { display: flex; gap: var(--space-4); }
    .iconBtn { display: inline-flex; align-items: center; gap: var(--space-4); }
    .iconBtn.danger {
      color: var(--color-text-primary);
      border-color: var(--color-accent-primary);
      background: var(--color-accent-soft);
    }
    .icon { width: 13px; height: 13px; }

    .subtitle {
      font-size: 11px;
      color: var(--color-text-secondary);
      text-align: center;
      margin: var(--space-4) 0 0;
      padding-bottom: calc(var(--space-24) + env(safe-area-inset-bottom));
    }

    .toast {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(var(--space-32) + env(safe-area-inset-bottom));
      z-index: 20;
      border-radius: var(--radius-pill);
      border: 1px solid var(--color-accent-soft);
      background: var(--color-card);
      box-shadow: 0 6px 20px var(--color-bg-primary);
      padding: var(--space-8) var(--space-12);
      display: flex;
      gap: var(--space-8);
      align-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity .25s ease;
    }

    .toast.show { opacity: 1; pointer-events: auto; }
  </style>
</head>
<body class="app">
  <main id="appWrap" class="container">
    <section id="hero" class="card hero" aria-live="polite">
      <div class="ring">
        <svg class="ringSvg" viewBox="0 0 180 180" aria-hidden="true">
          <circle class="ringTrack" cx="90" cy="90" r="62"></circle>
          <circle id="heroRingProgress" class="ringProgress" cx="90" cy="90" r="62"></circle>
        </svg>
        <div id="ringNumber" class="ringNumber">90</div>
      </div>
      <p id="heroLabel" class="heroLabel">Days left</p>
      <p id="heroSentence" class="heroSub">If you enter today, you must leave by —.</p>
    </section>

    <section class="card">
      <h2 class="sectionTitle">Add a trip</h2>

      <div class="field">
        <div class="fieldHead">
          <svg class="fieldIcon" viewBox="0 0 24 24" fill="none"><path d="M18 12H4m0 0 5-5m-5 5 5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span>Entry date</span>
        </div>
        <div class="inputWrap">
          <input class="input" type="date" id="entryDate" />
          <svg class="calIcon" viewBox="0 0 24 24" fill="none"><path d="M7 2v3M17 2v3M3 9h18M5 5h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
      </div>

      <div class="field">
        <div class="fieldHead">
          <svg class="fieldIcon" viewBox="0 0 24 24" fill="none"><path d="M18 12H4m0 0 5-5m-5 5 5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span>Exit date</span>
        </div>
        <div class="inputWrap">
          <input class="input" type="date" id="exitDate" />
          <svg class="calIcon" viewBox="0 0 24 24" fill="none"><path d="M7 2v3M17 2v3M3 9h18M5 5h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
      </div>

      <div class="quick-pills">
        <button class="pill quickBtn" type="button" data-quick="1">1</button>
        <button class="pill quickBtn" type="button" data-quick="7">7</button>
        <button class="pill quickBtn" type="button" data-quick="14">14</button>
        <button class="pill quickBtn" type="button" data-quick="30">30</button>
      </div>

      <p class="tripMeta">Trip length: <strong id="tripLength">—</strong></p>
      <div class="actions">
        <button id="saveTripBtn" type="button" class="btn-primary">Save</button>
        <div class="subActions">
          <button id="swapDatesBtn" type="button" class="secondary hide">Swap dates</button>
          <button id="cancelEditBtn" type="button" class="secondary hide">Cancel</button>
        </div>
      </div>
      <div id="tripError" class="error"></div>
    </section>

    <section class="card">
      <h3 class="tripsTitle">Your trips</h3>
      <div id="tripsEmpty" class="tripSub">You haven’t added any trips yet.</div>
      <div id="tripsList"></div>
    </section>

    <div class="subtitle">Estimates only. Verify official Schengen rules.</div>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite">
    <span id="toastText"></span>
    <button id="undoBtn" class="secondary hide" type="button">Undo</button>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').catch(() => {});
    }
  </script>
</body>
</html>
