<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Schengen Days</title>
  <meta name="theme-color" content="#0E1430" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="./design-tokens.css" />
  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body.app {
      margin: 0;
      min-height: 100%;
      background: #0E1430;
      color: #FFFFFF;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", "Segoe UI", Roboto, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom) 0;
    }

    .container {
      width: 402px;
      max-width: 100%;
      margin: 0 auto;
      padding: 10px 12px calc(14px + env(safe-area-inset-bottom));
      display: grid;
      gap: 17px;
    }

    .card {
      background: #151C3F;
      border-radius: 20px;
      border: none;
      box-shadow: none;
    }

    .hero {
      min-height: 293px;
      padding: 26px 22px 18px;
      display: grid;
      justify-items: center;
      align-content: start;
      text-align: center;
      gap: 10px;
    }

    .ring {
      width: 180px;
      height: 180px;
      position: relative;
      display: grid;
      place-items: center;
      margin-top: 0;
    }

    .ringSvg {
      width: 180px;
      height: 180px;
      transform: rotate(-90deg);
      overflow: visible;
    }

    .ringTrack {
      fill: none;
      stroke: #2C3B50;
      stroke-width: 14;
    }

    .ringProgress {
      fill: none;
      stroke: #4F7BFF;
      stroke-width: 14;
      stroke-linecap: round;
      filter: drop-shadow(0 4px 18.7px rgba(28, 126, 255, 0.6));
      transition: stroke-dashoffset .35s ease-out;
    }

    .ringNumber {
      position: absolute;
      font-size: 64px;
      line-height: 1;
      font-weight: 700;
      letter-spacing: -0.03em;
    }

    .heroLabel {
      margin: 0;
      font-size: 36px;
      line-height: 1.05;
      font-weight: 500;
      color: #A8B2D1;
    }

    .heroSub {
      margin: 10px 0 0;
      font-size: 32px;
      line-height: 1.28;
      font-weight: 400;
      color: #FFFFFF;
    }

    .trip {
      min-height: 406px;
      padding: 17px 10px 14px;
    }

    .sectionTitle {
      margin: 0 0 12px;
      text-align: center;
      font-size: 40px;
      line-height: 1.1;
      font-weight: 500;
      color: #FFFFFF;
    }

    .field {
      display: grid;
      gap: 8px;
      margin-bottom: 12px;
    }

    .fieldHead {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 32px;
      line-height: 1.1;
      font-weight: 700;
      color: #FFFFFF;
      padding-left: 2px;
    }

    .fieldIcon,
    .calIcon {
      width: 18px;
      height: 18px;
      color: #46528D;
      flex: 0 0 auto;
    }

    .inputWrap {
      position: relative;
    }

    .input {
      width: 100%;
      height: 44px;
      border: none;
      border-radius: 14px;
      background: #1E264D;
      color: #FFFFFF;
      padding: 0 44px 0 14px;
      font-size: 32px;
      line-height: 1;
      font-weight: 400;
      outline: none;
    }

    .inputWrap .calIcon {
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
    }

    .input::-webkit-calendar-picker-indicator {
      opacity: 0;
      width: 36px;
      height: 100%;
      position: absolute;
      right: 0;
      top: 0;
    }

    .quick-pills {
      display: flex;
      gap: 10px;
      margin: 14px 0 15px;
    }

    .pill {
      width: 49px;
      height: 44px;
      border: none;
      border-radius: 10px;
      background: #1E264D;
      color: #FFFFFF;
      font-size: 32px;
      line-height: 1;
      font-weight: 700;
      padding: 0;
    }

    .pill.active { background: #46528D; }

    .tripMeta,
    .subActions,
    #tripError {
      display: none;
    }

    .btn-primary {
      width: 100%;
      height: 44px;
      border: none;
      border-radius: 16px;
      background: #4F7BFF;
      color: #FFFFFF;
      font-size: 32px;
      line-height: 1;
      font-weight: 700;
    }

    .tripsWrap { display: none; }

    .subtitle {
      margin: 0;
      text-align: left;
      font-size: 0;
      line-height: 0;
      color: transparent;
    }

    .toast {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(74px + env(safe-area-inset-bottom));
      background: #151C3F;
      border-radius: 12px;
      border: 1px solid #2C3B50;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 20;
      opacity: 0;
      pointer-events: none;
      transition: opacity .25s ease;
    }

    .toast.show { opacity: 1; pointer-events: auto; }
    .secondary { border: none; background: #1E264D; color: #FFFFFF; border-radius: 12px; padding: 6px 10px; }
    .hide { display: none; }

    @media (max-width: 402px) {
      .container { width: 100%; }
      .heroLabel { font-size: 8.96vw; }
      .heroSub,
      .fieldHead,
      .input,
      .pill,
      .btn-primary,
      .sectionTitle { font-size: 7.96vw; }
    }
  </style>
</head>
<body class="app">
  <main id="appWrap" class="container">
    <section id="hero" class="card hero" aria-live="polite">
      <div class="ring">
        <svg class="ringSvg" viewBox="0 0 180 180" aria-hidden="true">
          <circle class="ringTrack" cx="90" cy="90" r="72"></circle>
          <circle id="heroRingProgress" class="ringProgress" cx="90" cy="90" r="72"></circle>
        </svg>
        <div id="ringNumber" class="ringNumber">90</div>
      </div>
      <p id="heroLabel" class="heroLabel">Days left</p>
      <p id="heroSentence" class="heroSub">If you enter today, you must leave by —.</p>
    </section>

    <section class="card trip">
      <h2 class="sectionTitle">Add a trip</h2>

      <div class="field">
        <div class="fieldHead">
          <svg class="fieldIcon" viewBox="0 0 37 16" fill="none" aria-hidden="true"><path d="M37 8L24 8" stroke="currentColor" stroke-width="2"/><path d="M30.2929 1.29289C30.6834 0.902369 31.3166 0.902369 31.7071 1.29289L36.7071 6.29289C37.0976 6.68342 37.0976 7.31658 36.7071 7.70711C36.3166 8.09763 35.6834 8.09763 35.2929 7.70711L31 3.41421L26.7071 7.70711C26.3166 8.09763 25.6834 8.09763 25.2929 7.70711C24.9024 7.31658 24.9024 6.68342 25.2929 6.29289L30.2929 1.29289Z" fill="currentColor" transform="translate(0,16) scale(1,-1)"/></svg>
          <span>Entry date</span>
        </div>
        <div class="inputWrap">
          <input class="input" type="date" id="entryDate" />
          <svg class="calIcon" viewBox="0 0 17 14" fill="none" aria-hidden="true"><rect x="1" y="3" width="15" height="10" rx="1" stroke="currentColor" stroke-width="2"/><rect width="17" height="7" transform="matrix(1 0 0 -1 0 4)" fill="currentColor"/><rect width="3" height="2" transform="matrix(1 0 0 -1 0 2)" fill="currentColor"/><rect width="3" height="2" transform="matrix(1 0 0 -1 14 2)" fill="currentColor"/></svg>
        </div>
      </div>

      <div class="field">
        <div class="fieldHead">
          <svg class="fieldIcon" viewBox="0 0 37 16" fill="none" aria-hidden="true"><path d="M0 8H13" stroke="currentColor" stroke-width="2"/><path d="M6.70711 14.7071C6.31658 15.0976 5.68342 15.0976 5.29289 14.7071L0.292892 9.70711C-0.097631 9.31658 -0.097631 8.68342 0.292892 8.29289C0.683417 7.90237 1.31658 7.90237 1.70711 8.29289L6 12.5858L10.2929 8.29289C10.6834 7.90237 11.3166 7.90237 11.7071 8.29289C12.0976 8.68342 12.0976 9.31658 11.7071 9.70711L6.70711 14.7071Z" fill="currentColor" transform="translate(0,-0)"/></svg>
          <span>Exit date</span>
        </div>
        <div class="inputWrap">
          <input class="input" type="date" id="exitDate" />
          <svg class="calIcon" viewBox="0 0 17 14" fill="none" aria-hidden="true"><rect x="1" y="3" width="15" height="10" rx="1" stroke="currentColor" stroke-width="2"/><rect width="17" height="7" transform="matrix(1 0 0 -1 0 4)" fill="currentColor"/><rect width="3" height="2" transform="matrix(1 0 0 -1 0 2)" fill="currentColor"/><rect width="3" height="2" transform="matrix(1 0 0 -1 14 2)" fill="currentColor"/></svg>
        </div>
      </div>

      <div class="quick-pills">
        <button class="pill quickBtn" type="button" data-quick="1">1</button>
        <button class="pill quickBtn" type="button" data-quick="7">7</button>
        <button class="pill quickBtn" type="button" data-quick="14">14</button>
        <button class="pill quickBtn" type="button" data-quick="30">30</button>
      </div>

      <p class="tripMeta">Trip length: <strong id="tripLength">—</strong></p>
      <button id="saveTripBtn" type="button" class="btn-primary">Save</button>
      <div class="subActions">
        <button id="swapDatesBtn" type="button" class="secondary hide">Swap dates</button>
        <button id="cancelEditBtn" type="button" class="secondary hide">Cancel</button>
      </div>
      <div id="tripError"></div>
    </section>

    <section class="card tripsWrap">
      <h3 class="tripsTitle">Your trips</h3>
      <div id="tripsEmpty" class="tripSub">You haven’t added any trips yet.</div>
      <div id="tripsList"></div>
    </section>

    <div class="subtitle">Estimates only. Verify official Schengen rules.</div>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite">
    <span id="toastText"></span>
    <button id="undoBtn" class="secondary hide" type="button">Undo</button>
  </div>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').catch(() => {});
    }
  </script>
</body>
</html>
